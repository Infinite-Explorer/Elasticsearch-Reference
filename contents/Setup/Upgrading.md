### 升级

#### 重要

在升级ES之前：

* 参看[重大变更](https://www.elastic.co/guide/en/elasticsearch/reference/current/breaking-changes.html)文档。
* 在升级生产环境集群之前，先在开发环境测试升级。
* 总是在升级前备份数据。你不能回滚到之前的版本，除非你有备份的数据。

ES通常可以使用滚动升级的过程来升级，这样就可以不用中断服务了。这部分详细述说了如何滚动升级和全集群重启升级。

检查你的系统是否支持滚动升级，可以参考下面这张表：

<table style="border-collapse:collapse;">
<tr>
<td>
升级前版本
</td>
<td>
升级后版本
</td>
<td>
支持的升级类型
</td>
</tr>
<tr>
<td>
0.90.x
</td>
<td>
2.x
</td>
<td>
全集群重启
</td>
</tr>
<tr>
<td>
2.x
</td>
<td>
2.y
</td>
<td>
滚动升级('y>x')
</td>
</tr>
<tr>
<td>
1.x
</td>
<td>
2.x
</td>
<td>
全集群重启
</td>
</tr>
</table>

使用插件升级ES

升级的时候也需要考虑插件升级。插件必须跟随ES进行升级。

查看插件供应商以确保插件跟ES升级的目标版本兼容。如果是滚动升级，当插件工作在多个版本的集群中时，也是值得检查的。大多插件都需要跟随ES进行升级，尽管有些主要通过浏览器访问的插件（`_site`插件）在使用的API经过兼容性处理的时候，可以继续工作。

每个节点的滚动升级和全集群重启过程大抵如下：

* 关闭ES
* 升级ES
* 升级插件
* 启动ES